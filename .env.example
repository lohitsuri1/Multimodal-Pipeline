# ============================================================
# Multimodal Content Pipeline – environment configuration
# Copy this file to .env and fill in your values.
# ============================================================

# ---- Required API Keys ----
# OpenAI (script generation) – https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# ---------------------------------------------------------------
# LLM Fallback: Google Gemini (FREE — 1,500 requests/day)
# Used automatically when OpenAI quota is exhausted.
# Get your free key at: https://aistudio.google.com/app/apikey
# ---------------------------------------------------------------
GOOGLE_API_KEY=

# Optional: Control provider order (default: openai first, then gemini)
# LLM_PROVIDER_ORDER=openai,gemini

# Optional: Control visual provider order (default: google first, then stock APIs)
VISUAL_PROVIDER_ORDER=google,pexels,pixabay
# Recommended Gemini image generation model
GOOGLE_IMAGE_MODEL=gemini-2.0-flash-preview-image-generation

# ---- Optional API Keys ----
# ElevenLabs (high-quality TTS) – https://elevenlabs.io/
# Leave empty to use gTTS (free) by default.
ELEVENLABS_API_KEY=

# Pexels (royalty-free images) – https://www.pexels.com/api/
PEXELS_API_KEY=your_pexels_api_key_here

# Pixabay (royalty-free images, fallback) – https://pixabay.com/api/docs/
PIXABAY_API_KEY=your_pixabay_api_key_here

# ---- Content preset defaults ----
# Niche: devotion | finance | ai_saas | passive_income
DEFAULT_NICHE=devotion

# Cost tier: free | low_cost | quality
#   free      – gpt-3.5-turbo + gTTS + Pexels/Pixabay  (~$0.00/run)
#   low_cost  – gpt-4o-mini + optional ElevenLabs       (~$0.02/run)
#   quality   – gpt-4o + ElevenLabs + Replicate         (~$0.20/run)
DEFAULT_COST_TIER=free

# ---- Cost guardrails (hard caps) ----
# These limits apply regardless of the cost tier chosen.
MAX_TOKENS=4000
MAX_IMAGES=40
MAX_TTS_CHARS=10000
MAX_RETRIES=3

# ---- Caching ----
# Set to false to disable file-based caching (re-runs will re-bill APIs)
ENABLE_CACHE=true
CACHE_DIR=.cache

# ---- Video generation settings ----
VIDEO_DURATION_MINUTES=30
OUTPUT_DIR=output_videos
TEMP_DIR=temp_files

# Cache directory (disk-based cache to avoid re-billing on repeated runs)
CACHE_DIR=.cache

# Voice settings
VOICE_LANGUAGE=en
VOICE_SPEED=0.9

# Background music volume (0.0 to 1.0, relative to voice)
MUSIC_VOLUME=0.2
# Additional ducking gain reduction (dB) applied to music under narration
MUSIC_DUCK_DB=6.0
# Fade in/out duration for background music (milliseconds)
MUSIC_FADE_MS=2500

# Optional: automatic music download from a royalty-free YouTube URL
# Requires: yt-dlp installed in your environment
MUSIC_YOUTUBE_URL=
# Optional trim start offset (seconds)
MUSIC_YOUTUBE_START_SEC=0
# Optional trim duration (seconds, 0 = full track from start offset)
MUSIC_YOUTUBE_DURATION_SEC=0

# Subtitle and scene transition polish
SUBTITLES_ENABLED=true
SUBTITLE_MAX_CHARS=80
SUBTITLE_MIN_SECONDS=2.0
TRANSITION_SECONDS=0.6

# ── Cost and safety controls ─────────────────────────────────────────────────
# Maximum tokens per OpenAI completion (default 4000)
MAX_TOKENS=4000
# Maximum retries for API calls (default 3)
MAX_RETRIES=3
# Maximum number of scenes / images per video (default 30)
MAX_IMAGES=30
# Maximum TTS characters per run (default 5000; ElevenLabs free tier = 10 000)
MAX_TTS_CHARS=5000

# ── Caching ──────────────────────────────────────────────────────────────────
# Enable file-based caching of scripts, titles, and TTS outputs (default true)
ENABLE_CACHE=true
# Cache directory (relative to repo root; ignored by git)
CACHE_DIR=.cache

# ── API server ────────────────────────────────────────────────────────────────
# Shared secret for X-API-Key header authentication (set a long random value)
PIPELINE_API_KEY=change_me_to_a_long_random_secret
# Maximum API requests per minute per key (default 10)
# ── Cost controls ────────────────────────────────────────────────────────────
# Maximum tokens sent to the LLM in a single call
MAX_TOKENS_PER_CALL=4000
# Maximum automatic retries on transient API errors
MAX_RETRIES=3
# Maximum images/scenes fetched per run
MAX_SCENES_PER_RUN=30
# Maximum TTS characters per narration call
MAX_TTS_CHARS=5000

# ── API server (api_server.py / uvicorn) ──────────────────────────────────────
# Set API_KEY to require X-API-Key header on all requests (leave blank to disable)
API_KEY=
# Maximum requests per IP per minute (in-memory rate limiting)
RATE_LIMIT_PER_MINUTE=10
